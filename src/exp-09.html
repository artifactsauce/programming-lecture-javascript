<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="author" content="Kenji Akiyama">
<title>講義資料 9</title>
</head>
<body>
<h1>講義資料 9</h1>
<p>
  Input a number: 
  <input type="text" id="input-text">
  <input type="button" value="Click" onclick="doit()">
  <span id="message"></span>
</p>
<p id="answer"></p>
<p><a href="exp-10.html">次のページへ</a></p>
<script type="text/javascript">
  <!--
      function doit() {
        var number, message, array;
        number = document.getElementById( "input-text" ).value;
        message = document.getElementById( "message" );
        
        if ( number == "" ) {
          message.innerHTML = "何も入力されていません";
        }
        else if ( isNaN( number ) ) {
          message.innerHTML = "これは数値ではありません";
        }
        else {
          message.innerHTML = number + "以下の<a href='http://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A3%E3%83%9C%E3%83%8A%E3%83%83%E3%83%81%E6%95%B0'>フィボナッチ数列</a>を表示します";
          array = calc_fibonacci( number );
          print_array( array );
        }
      }

      function calc_fibonacci( threshold, array ) {
        var sum;
        if ( ! array ) array = [ 0, 1 ];
        sum = array[ array.length - 1 ] + array[ array.length - 2 ];
        if ( sum > threshold ) {
          return array;
        }
        else {
          array.push( sum );
          return calc_fibonacci( threshold, array );
        }
      }

      function print_array( array ) {
        var answer;
        answer = document.getElementById( "answer" );
        answer.innerHTML = array.join("<br>");
      }
      // -->
</script>
</body>
</html>
